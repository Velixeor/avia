databaseChangeLog:
  - changeSet:
      id: 1.5
      author: postgres
      changes:
        - sql:
            sql: |
              CREATE TABLE airport.reservation (
                  id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
                  place_id INT NOT NULL,
                  user_id INT NOT NULL,
                  status VARCHAR(20) NOT NULL,
                  expires_at TIMESTAMP NOT NULL,
                  price DECIMAL(10,2) NOT NULL,
                  created_at TIMESTAMP DEFAULT NOW() NOT NULL,
                  CONSTRAINT fk_reservation_place FOREIGN KEY (place_id) REFERENCES airport.place(id) ON DELETE CASCADE,
                  CONSTRAINT fk_reservation_user FOREIGN KEY (user_id) REFERENCES airport.user(id) ON DELETE CASCADE,
                  CONSTRAINT check_status CHECK (status IN ('booked', 'paid', 'cancelled'))
              );
